// 消费分类映射
const CATEGORY_MAP = {
  '餐饮': [
    '饭', '餐', '吃', '外卖', '火锅', '烧烤', '面', '菜', '饮', '食',
    '烤肠', '小吃', '零食', '水果', '早餐', '午餐', '晚餐', '夜宵',
    '自助餐', '快餐', '便当', '盒饭', '饺子', '包子', '馒头', '粥',
    '汤', '炒菜', '川菜', '湘菜', '粤菜', '日料', '寿司', '韩餐',
    '披萨', '汉堡', '炸鸡', '牛排', '西餐', '甜品', '蛋糕', '面包',
    '冰淇淋', '巧克力', '饼干', '薯片', '坚果', '瓜子'
    // 移除与咖啡奶茶重复的：饮料、矿泉水
  ],
  '咖啡奶茶': [
    '咖啡', '奶茶', '星巴克', '瑞幸', '喜茶', '茶', '饮品', '拿铁',
    '美式', '卡布奇诺', '摩卡', '焦糖玛奇朵', '冷萃', '手冲', '茶颜悦色',
    '奈雪', '一点点', 'CoCo', '蜜雪冰城', '贡茶', '快乐柠檬', '书亦烧仙草',
    '古茗', '茶百道', '沪上阿姨', '益禾堂', '果茶', '柠檬茶', '珍珠奶茶',
    '波霸', '椰果', '布丁', '奶盖', '水果茶', '冰沙', '奶昔', '酸奶',
    '豆浆', '果汁', '可乐', '雪碧', '芬达', '气泡水', '苏打水', '凉茶'
    // 保留饮料相关词汇在此分类
  ],
  '购物网购': [
    '淘宝', '京东', '拼多多', '网购', '购物', '商场', '超市', '天猫',
    '苏宁', '唯品会', '考拉', '亚马逊', '当当', '闲鱼', '转转',
    '直播购物', '海淘', '代购', '微商', '团购', '秒杀', '优惠券',
    '百货', '便利店', '专卖店', '旗舰店', '自营', '跨境', '全球购',
    '批发', '零售', '会员', '积分', '折扣', '满减', '预售', '尾款',
    '定金', '运费', '包装', '快递', '物流', '收货', '退货', '换货'
  ],
  '交通出行': [
    '地铁', '公交', '出租', '打车', '滴滴', '共享单车', '公共交通',
    '快车', '专车', '顺风车', '拼车', '代驾', '租车', '摩的', '三轮',
    '电动车', '自行车', '轮渡', '船票', '船运', '机场大巴', '长途汽车',
    '城际', '市内', '通勤', 'ETC', '高速费', '过路费', '过桥费',
    '停车费', '违章', '罚单', '年检', '驾照', '行驶证', '导航',
    '地图', 'GPS', '行程', '出发', '到达', '接送', '候车', '候机'
  ],
  '车辆相关': [
    '汽车', '加油', '停车', '保养', '维修', '车险', '洗车', '打蜡',
    '美容', '装饰', '改装', '配件', '轮胎', '电瓶', '刹车', '机油',
    '滤芯', '火花塞', '变速箱', '发动机', '底盘', '空调', '玻璃',
    '贴膜', '座套', '脚垫', '行车记录仪', '倒车雷达', '车载',
    '充电器', '保险杠', '大灯', '尾灯', '雨刷', '喇叭', '方向盘',
    '离合器', '油门', '刹车片', '减震器', '轴承', '皮带', '水箱'
    // 移除与交通出行重复的：导航
  ],
  '火车机票': [
    '火车', '高铁', '飞机', '机票', '车票', '动车', '普快', '特快',
    '直达', '卧铺', '硬座', '软卧', '站票', '商务座', '一等座',
    '二等座', '儿童票', '学生票', '军人票', '残军票', '改签', '退票',
    '候补', '抢票', '12306', '携程', '去哪儿', '飞猪', '同程',
    '航旅纵横', '值机', '登机', '托运', '行李', '安检', '候机楼',
    '登机口', '航班', '航空公司', '头等舱', '经济舱', '公务舱', '延误'
  ],
  '娱乐': [
    '电影', '游戏', 'KTV', '酒吧', '门票', '演出', '演唱会', '展览',
    '游乐园', '网吧', '桌游', '密室', '剧本杀', '棋牌', '麻将',
    '扑克', '台球', '保龄球', '高尔夫', '滑雪', '滑冰', '游泳',
    '音乐会', '话剧', '歌剧', '相声', '小品', '马戏', '杂技', '魔术',
    '电影票', '爆米花', '周边', '手办', '模型', '玩偶', '游戏机', '点卡', '装备', '皮肤'
    // 移除与健身运动重复的：健身、瑜伽、舞蹈
    // 移除与餐饮重复的：饮料
  ],
  '医疗药品': [
    '医院', '药', '诊所', '挂号', '检查', '治疗', '保健', '体检',
    '门诊', '急诊', '住院', '手术', '麻醉', '输液', '打针', '疫苗',
    '中药', '西药', '处方', '非处方', '感冒药', '退烧药', '止咳',
    '消炎', '抗生素', '维生素', '钙片', '保健品', '器械', '血压计',
    '血糖仪', '体温计', '口罩', '消毒', '酒精', '棉签', '纱布',
    '创可贴', '轮椅', '拐杖', '理疗', '按摩', '针灸', '拔罐', '推拿'
    // 移除与宠物重复的：医院
  ],
  '教育学习': [
    '学习', '教育', '书', '课程', '培训', '学费', '考试', '辅导',
    '教材', '教辅', '练习册', '试卷', '文具', '铅笔', '钢笔', '本子',
    '书包', '计算器', '点读笔', '复读机', '词典', '电子书', '网课',
    '直播课', '录播', '一对一', '小班', '大班', '英语', '数学',
    '语文', '物理', '化学', '生物', '历史', '地理', '政治', '艺术',
    '音乐', '美术', '体育', '编程', '机器人', '围棋', '书法'
    // 移除与娱乐重复的：舞蹈
  ],
  '房租房贷': [
    '房租', '房贷', '房费', '住房', '租房', '月租', '押金',
    '物业', '取暖', '中介', '房东', '租客', '合租', '整租', '公寓',
    '小区', '民宅', '商用', '住宅', '首付', '贷款', '按揭', '公积金',
    '商业贷', '利率', '还款', '月供', '提前还款', '违约金', '房产证',
    '过户', '契税', '印花税', '维修基金', '装修', '家具', '家电',
    '电视', '钥匙', '门禁', '车位', '储藏室', '阳台', '电梯'
    // 移除与水电煤网重复的：水电、宽带
  ],
  '水电煤网': [
    '水费', '电费', '燃气费', '煤气', '网费', '宽带', '话费', '暖气费',
    '污水处理费', '垃圾处理费', '有线电视', '物业费', '充值', '缴费',
    '账单', '欠费', '停水', '停电', '停气', '断网', '开户', '过户',
    '销户', '预存', '阶梯', '峰谷', '智能表', '抄表', '发票', '收据',
    '移动', '联通', '电信', '流量', '套餐', '分钟', '短信', '国际',
    '漫游', '亲情号', '副卡', '靓号', '违约金', '补卡', '换卡', 'SIM'
  ],
  '服饰鞋包': [
    '衣服', '鞋', '包包', '服装', '饰品', '配饰', '上衣', '裤子', '裙子',
    '外套', '内衣', '袜子', '帽子', '围巾', '手套', '领带', '皮带',
    '手表', '项链', '戒指', '耳环', '手链', '发卡', '发带', '胸针',
    '运动鞋', '皮鞋', '凉鞋', '拖鞋', '靴子', '高跟鞋', '单鞋', '帆布鞋',
    '双肩包', '单肩包', '手提包', '钱包', '卡包', '行李箱', '化妆包',
    '钥匙包', '眼镜', '太阳镜', '老花镜', '隐形眼镜', '美瞳', '伞', '雨衣'
  ],
  '日用杂货': [
    '日用品', '纸巾', '洗漱', '清洁', '杂货', '牙刷', '牙膏', '毛巾',
    '浴巾', '肥皂', '香皂', '沐浴露', '洗发水', '护发素', '洗面奶',
    '护肤品', '剃须刀', '卫生巾', '护垫', '尿不湿', '湿巾', '棉柔巾',
    '垃圾袋', '保鲜膜', '保鲜袋', '食品袋', '衣架', '挂钩', '收纳',
    '整理箱', '工具箱', '螺丝刀', '锤子', '钉子', '胶水', '胶带',
    '绳子', '电池', '灯泡', '插座', '插排', '充电器', '数据线', '转换头'
  ],
  '健身运动': [
    '健身', '运动', '游泳', '瑜伽', '器材', '跑步', '篮球', '足球',
    '排球', '羽毛球', '乒乓球', '网球', '高尔夫', '台球', '保龄球',
    '滑雪', '滑冰', '轮滑', '滑板', '自行车', '登山', '徒步', '露营',
    '攀岩', '潜水', '冲浪', '帆船', '划船', '钓鱼', '健身卡', '私教',
    '团课', '器械', '哑铃', '杠铃', '跑步机', '椭圆机', '动感单车',
    '瑜伽垫', '球拍', '球鞋', '运动服', '护具', '水壶', '毛巾', '计步器',
    '舞蹈' // 从娱乐移动到此
  ],
  '宠物': [
    '宠物', '狗', '猫', '宠物粮', '狗粮', '猫粮', '零食',
    '罐头', '营养膏', '化毛膏', '玩具', '磨牙棒', '猫砂', '尿垫',
    '笼子', '窝', '衣服', '牵引绳', '项圈', '食盆', '水盆', '自动',
    '喂食器', '饮水机', '梳子', '指甲剪', '浴液', '驱虫', '疫苗',
    '绝育', '体检', '挂号', '处方', '手术', '住院', '美容', '洗澡',
    '剪毛', '寄养', '训练', '证书', '芯片', '摄影', '殡葬', '骨灰盒'
    // 移除与医疗药品重复的：医院
  ],
  '社交送礼': [
    '礼物', '礼品', '红包', '礼金', '孝敬', '请客', '生日', '节日',
    '纪念日', '情人节', '七夕', '圣诞', '新年', '春节', '中秋', '端午',
    '鲜花', '蛋糕', '巧克力', '首饰', '香水', '化妆品', '护肤品',
    '家居', '装饰', '玩具', '书籍', '文具', '定制',
    '刻字', '贺卡', '祝福', '聚会', '聚餐', 'AA', '买单', '份子钱',
    '见面礼', '压岁钱', '感恩', '回礼', '谢礼', '慰问', '祝贺'
  ],
  '保险': [
    '保险', '理财', '投资', '寿险', '重疾', '医疗', '意外', '车险',
    '家财', '旅游', '养老', '教育', '分红', '万能', '投连', '年金',
    '社保', '公积金', '商业', '公司', '个人', '团体', '代理人',
    '经纪人', '投保', '被保', '受益人', '保费', '保额', '缴费',
    '期缴', '趸交', '现金价值', '保单', '合同', '条款', '免责',
    '等待期', '观察期', '理赔', '报案', '材料', '审核', '赔付', '拒赔'
  ],
  '电子产品': [
    '手机', '电脑', '数码', '电子', '笔记本', '台式机', '平板', 'iPad',
    'iPhone', '华为', '小米', 'OPPO', 'vivo', '三星', '荣耀', '一加',
    '魅族', '联想', '戴尔', '惠普', '华硕', '宏碁', '索尼', '佳能',
    '尼康', '富士', 'GoPro', '大疆', '耳机', '音响', '键盘', '鼠标',
    '显示器', '打印机', '扫描仪', '投影仪', '路由器', '交换机', '硬盘',
    'U盘', '内存', '显卡', 'CPU', '主板', '机箱', '电源', '散热'
  ],
  '旅游住宿': [
    '旅游', '酒店', '住宿', '民宿', '度假', '景点', '门票', '导游',
    '旅行团', '自由行', '自驾', '包车', '机票', '火车', '大巴', '游轮',
    '签证', '护照', '港澳', '台湾', '出境', '入境', '免税', '购物',
    '纪念品', '特产', '拍照', '摄影', '游记', '攻略', '地图',
    '五星', '四星', '三星', '经济', '青旅', '客栈', '别墅', '公寓',
    '套房', '标间', '大床', '双床', '家庭', '行政', '总统', '前台'
    // 移除与交通出行重复的：导航
  ],
  '美容美发': [
    '美容', '美发', '美甲', '护肤', '化妆品', '美妆', '洗脸', '清洁',
    '去角质', '黑头', '粉刺', '痘痘', '祛斑', '美白', '保湿', '补水',
    '抗皱', '紧致', '眼霜', '精华', '乳液', '面霜', '防晒', '隔离',
    '粉底', 'BB霜', 'CC霜', '遮瑕', '散粉', '蜜粉', '腮红', '高光',
    '阴影', '眉笔', '眼线', '睫毛', '口红', '唇彩', '卸妆', '洗发',
    '剪发', '烫发', '染发', '造型', '护理', '头皮', '按摩', 'SPA'
  ],
  '工资': [
    '工资', '薪资', '工钱', '奖金', '年终奖', '补贴', '报销', '收入',
    '基本工资', '绩效', '提成', '佣金', '分红', '津贴', '餐补', '交通补',
    '住房补', '通讯补', '高温补', '低温补', '夜班补', '加班费', '全勤',
    '社保', '公积金', '个税', '税后', '税前', '劳务费', '稿费', '设计费',
    '咨询费', '服务费', '课时费', '演出费', '翻译费', '兼职', '实习',
    '试用', '转正', '离职', '补偿', '赔偿', '遣散', '退休', '养老金'
  ]
};

// 图标映射
const ICON_MAP = {
  '餐饮': 'food.png',
  '咖啡奶茶': 'coffee.png',
  '购物网购': 'shopping.png',
  '交通出行': 'transport.png',
  '车辆相关': 'car.png',
  '火车机票': 'train.png',
  '娱乐': 'film.png',
  '医疗药品': 'medical.png',
  '教育学习': 'education.png',
  '房租房贷': 'house.png',
  '水电煤网': 'utilities.png',
  '服饰鞋包': 'fashion.png',
  '日用杂货': 'groceries.png',
  '健身运动': 'fitness.png',
  '宠物': 'pet.png',
  '社交送礼': 'gift.png',
  '保险': 'insurance.png',
  '电子产品': 'electronics.png',
  '旅游住宿': 'hotel.png',
  '美容美发': 'beauty.png',
  '工资': 'cash.png'
};

// 获取消费分类
const getCategory = (description) => {
  for (const [category, keywords] of Object.entries(CATEGORY_MAP)) {
    if (keywords.some(keyword => description.includes(keyword))) {
      return category;
    }
  }
  return '日用杂货'; // 默认分类
};

// 获取分类图标
const getCategoryIcon = (category) => {
  return ICON_MAP[category] || 'groceries.png'; // 默认图标
};

module.exports = {
  getCategory,
  getCategoryIcon,
  CATEGORY_MAP,
  ICON_MAP
}; 